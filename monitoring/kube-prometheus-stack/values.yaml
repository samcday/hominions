# https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml

alertmanager:
  config:
    receivers:
      - name: dms
        webhook_configs:
          - url: ~
      - name: "null"
    route:
      routes:
        - matchers:
            - alertname = Watchdog
          receiver: dms
          group_wait: 0s
          repeat_interval: 30m
        - matchers:
          - alertname = InfoInhibitor
          receiver: null
  ingress:
    enabled: true
    ingressClassName: nginx
    hosts: [alertmanager.home.samcday.com]
    paths: [/]
grafana:
  enabled: false
  forceDeployDatasources: true
kubeApiServer:
  enabled: false
kubeControllerManager:
  enabled: false
kubeEtcd:
  enabled: false
kubeProxy:
  enabled: false
kubeScheduler:
  enabled: false
prometheus:
  ingress:
    enabled: true
    ingressClassName: nginx
    hosts: [prometheus.home.samcday.com]
    paths: [/]
  prometheusSpec:
    enableAdminAPI: true
    podMonitorSelectorNilUsesHelmValues: false
    probeSelectorNilUsesHelmValues: false
    retention: 30d
    retentionSize: 30GB
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: openebs-hostpath
          accessModes: [ReadWriteOnce]
          resources:
            requests:
              storage: 50Gi
    walCompression: true
prometheus-node-exporter:
  extraArgs:
    - --collector.filesystem.mount-points-exclude=^/(dev|proc|sys|var/lib/docker/.+|var/lib/kubelet/.+)($|/)
    - --collector.filesystem.fs-types-exclude=^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|iso9660|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$
    - --collector.textfile.directory=/host/root/var/lib/misc/vanilla-megabase/graftorio2
  prometheus:
    monitor:
      relabelings:
      - sourceLabels: [__meta_kubernetes_pod_node_name]
        targetLabel: instance
        replacement: $1
        action: replace
prometheusOperator:
  enabled: false
